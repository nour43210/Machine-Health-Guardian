{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="my-4"><i class="bi bi-clipboard2-pulse"></i> Machine Testing</h1>
    
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
            <h3>Enter Equipment Parameters</h3>
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('test_machine') }}">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Vibration (mm/s)</label>
                        <input type="number" step="0.01" class="form-control" name="vibration" required
                               min="0" max="20" title="Normal range: 0-4 mm/s">
                        <small class="text-muted">Normal range: 0-4 mm/s</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Temperature (°C)</label>
                        <input type="number" step="0.1" class="form-control" name="temperature" required
                               min="0" max="150" title="Normal range: 50-75°C">
                        <small class="text-muted">Normal range: 50-75°C</small>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Pressure (kPa)</label>
                        <input type="number" step="1" class="form-control" name="pressure" required
                               min="0" max="600" title="Normal range: 300-400 kPa">
                        <small class="text-muted">Normal range: 300-400 kPa</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">RPM</label>
                        <input type="number" step="10" class="form-control" name="rpm" required
                               min="0" max="3000" title="Normal range: 1500-2000 RPM">
                        <small class="text-muted">Normal range: 1500-2000 RPM</small>
                    </div>
                </div>
                
                <div class="text-center">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="bi bi-speedometer2"></i> Test Machine
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="card shadow-lg mt-4">
        <div class="card-header bg-info text-white">
            <h3>Testing Instructions</h3>
        </div>
        <div class="card-body">
            <ol class="list-group list-group-numbered">
                <li class="list-group-item">Measure current equipment parameters using your sensors</li>
                <li class="list-group-item">Enter the values in the form above</li>
                <li class="list-group-item">Click "Test Machine" to analyze</li>
                <li class="list-group-item">Review the detailed health report</li>
                <li class="list-group-item">Download PDF report for your records</li>
            </ol>
        </div>
    </div>
</div>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="alert alert-danger">
      {% for message in messages %}
        <div>{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
{% endblock %}

{% block extra_js %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock %}